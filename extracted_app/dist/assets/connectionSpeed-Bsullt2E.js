import{n as l}from"./index-DPfvpvAV.js";const r={MEDIUM:5,FAST:10};let n=null;async function p(){if(n){const e=new Date,o=new Date(n.timestamp);if((e.getTime()-o.getTime())/(1e3*60)<5)return n.speed}try{const o=`https://httpbin.org/bytes/51200?t=${Date.now()}`,s=performance.now(),i=new AbortController,a=setTimeout(()=>i.abort(),1e4),t=await fetch(o,{signal:i.signal});if(clearTimeout(a),!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);await t.arrayBuffer();const c=400/((performance.now()-s)/1e3*1024);return n={speed:c,timestamp:l()},c}catch(e){return console.warn("Failed to measure connection speed, using default slow speed:",e),.5}}function S(e){return e>=r.FAST?"full":(e>=r.MEDIUM,"partial")}function d(e){return e>=r.FAST?1:e>=r.MEDIUM?.8:.5}export{r as SPEED_THRESHOLDS,p as checkConnectionSpeed,d as getSyncPercentageBySpeed,S as getSyncStrategyBySpeed};
